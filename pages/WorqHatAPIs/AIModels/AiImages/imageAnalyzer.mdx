import { Callout, Tab, Tabs } from "nextra-theme-docs";

# Analyze Image Contents with AI (Powered by ImageCon V2)

ImageCon V2 Models are advanced tools designed to analyze the contents of images and detect various labels associated with them. These models have undergone extensive training to identify specific objects, scenes, actions, and concepts within an image. By utilizing these models, you can gain insights into the different elements present in a given photograph.

When an image is processed using ImageCon V2 Models, they are capable of detecting a wide range of labels, numbering in the thousands. These labels can include objects such as "Palm Tree," scenes like "Beach," actions like "Running," and concepts such as "Outdoors." By detecting these labels, the models provide information about the prominent elements and themes within the image.

In addition to label detection, ImageCon V2 Models also offer the ability to retrieve valuable information about various properties of an image. These properties encompass attributes like the color of the foreground and background, as well as the overall sharpness, brightness, and contrast of the image. This feature allows for a more comprehensive understanding of the visual characteristics and qualities of the analyzed image.

ImageCon V2 Models offer powerful capabilities for detecting labels in images, enabling the identification of objects, scenes, actions, and concepts present in a given photograph. Moreover, these models provide insights into image properties, including color attributes and visual qualities like sharpness, brightness, and contrast. By leveraging these advanced tools, users can extract valuable information from images, opening up a wide range of applications in various domains.

## How does it work?

ImageCon V2 Models operate by undergoing extensive training on large datasets of labeled images, enabling them to detect labels in images based on their contents. These models utilize deep learning techniques and convolutional neural networks to extract meaningful features and patterns from the input images. By comparing these features to learned representations of labels, the models assign confidence scores to different labels, allowing for label detection. A threshold is applied to the confidence scores to determine the most relevant labels for the image.

Alongside label detection, ImageCon V2 Models also analyze various image properties such as foreground and background colors, sharpness, brightness, and contrast. This analysis is accomplished through computer vision techniques applied to the image data. The output of ImageCon V2 Models includes the detected labels and their corresponding confidence scores, as well as information about image properties. These insights can be utilized in a variety of applications ranging from content categorization and image search to recommendation systems and automated tasks. Overall, ImageCon V2 Models provide advanced capabilities for understanding and utilizing images, making them invaluable tools in diverse domains.


<Callout type="info" emoji="ℹ️">
  <b>Info:</b> ImageCon V2 by WorqHat AI provides gender binary predictions based on physical
  appearance in images. These predictions are not intended to determine an individual's gender
  identity and should not be used for that purpose. They are more suitable for analyzing aggregate
  gender distribution statistics without identifying specific users. It is not recommended to make
  decisions impacting individuals' rights, privacy, or access to services based solely on these
  predictions. Caution and respect for individuals' self-identified gender are crucial when using
  ImageCon V2.
</Callout>


## Use Cases

- **Content Moderation**: ImageCon V2 can be used for content moderation purposes on social media
platforms or online communities. It can help identify and flag inappropriate or offensive images that violate community guidelines, thereby ensuring a safer and more respectful online environment.

- **Image Organization and Tagging**: ImageCon V2 can automatically analyze and tag images based on their content. This can be useful for organizing large image collections, creating searchable databases, or powering image search functionality on websites or applications.

- **E-commerce Product Categorization**: In an e-commerce setting, ImageCon V2 can assist in automatically categorizing products based on their visual attributes. For example, it can identify and tag clothing items by their style, color, or pattern, making it easier for customers to find specific products.

- **Visual Analytics and Insights**: ImageCon V2 can be leveraged to analyze large sets of images and extract valuable insights. This can include detecting trends, identifying popular objects or scenes, or understanding the visual preferences of a target audience. Such insights can inform marketing strategies, product development, or content creation.

- **Augmented Reality and Virtual Reality (AR/VR)**: ImageCon V2 can be utilized in AR/VR applications to provide real-time image analysis and enhance virtual experiences. It can detect objects or scenes in the user's environment, enabling interactive and immersive virtual overlays or visualizations.

- **Creative Tools and Image Editing**: ImageCon V2's analysis of image properties like color,
sharpness, brightness, and contrast can be valuable in creative applications. It can assist in automatic image enhancement, recommend filters or adjustments, or even generate new artistic effects based on the analyzed properties.

## How to use it?

### API Endpoint

````bash filename="API Endpoint" copy
https://api.worqhat.com/api/ai/images/v2/image-analysis
````

### Headers


| Header Name |  Required  | Description |
|:---------| :------------: | :---------------- |
| x-api-key| ``true`` | This helps us to identify the User Sending the Request |
| x-org-key|  ``true`` | This helps us to identify the Workspace Associated with the Request. This helps users to maintain easier logs |

### Request Body

The Request Body is a JSON Object that contains the following fields:

| Data Type | Key | Value | Description |
|:---------| :------------: | :---------------- | :---------------- |
| File Object | image | ``The Image File that you want to Analyse`` | This is the Image File that you want to Analyse. The Image File should be sent as a Formdata Object and can be any type. |

````json filename="Request Body (Formdata)" copy
{
    "image":"The Image File that you want to analyze"
}
````

### Sample Code

You can use the following Endpoints on any Codebase, including client side codebases as long as
you are able to send the Headers and the Request Body to the API Endpoint. It's that easy! Just
send a POST Request to the API Endpoint with the Headers and the Request Body, and you are good to go!


<Tabs items={['cURL', 'Client JS', 'NodeJS', 'Python', 'Ruby', 'PHP', 'Java', 'GO', 'C']}>
  <Tab>
    ```` bash filename="cURL" copy
    curl --location 'https://api.worqhat.com/api/ai/images/v2/image-analysis' \
    --header 'x-api-key: •••••••' \
    --header 'x-org-key: •••••••' \
    --form 'image=@"/C:/Users/ghosh/introduction.png"'
    ````
  </Tab>
  <Tab>
    ````js filename="Client JS fetch" copy
    var myHeaders = new Headers();
    myHeaders.append("x-api-key", "•••••••");
    myHeaders.append("x-org-key", "•••••••");

    var formdata = new FormData();
    formdata.append("image", fileInput.files[0], "introduction.png");

    var requestOptions = {
    method: 'POST',
    headers: myHeaders,
    body: formdata,
    redirect: 'follow'
  };

    fetch("https://api.worqhat.com/api/ai/images/v2/image-analysis", requestOptions)
    .then(response => response.text())
    .then(result => console.log(result))
    .catch(error => console.log('error', error));
    ````

    ````js filename="Client JS XHR" copy
    var xhr = new XMLHttpRequest();
    var url = "https://api.worqhat.com/api/ai/images/v2/image-analysis";
    xhr.open("POST", url, true);
    xhr.setRequestHeader("x-api-key", "•••••••");
    xhr.setRequestHeader("x-org-key", "•••••••");

    var formdata = new FormData();
    formdata.append("image", fileInput.files[0], "introduction.png");

    xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
    var response = JSON.parse(xhr.responseText);
    console.log(response);
  }
  };

    xhr.onerror = function (error) {
    console.log('error', error);
  };

    xhr.send(formdata);

    ````
  </Tab>
  <Tab>
    ````js filename="NodeJS" copy
    const request = require('request');
    const fs = require('fs');

    const url = 'https://api.worqhat.com/api/ai/images/v2/image-analysis';
    const apiKey = '•••••••';
    const orgKey = '•••••••';
    const filePath = 'path/to/introduction.png';

    const formData = {
    image: fs.createReadStream(filePath),
  };

    const requestOptions = {
    url: url,
    method: 'POST',
    headers: {
    'x-api-key': apiKey,
    'x-org-key': orgKey,
  },
    formData: formData,
  };

    request(requestOptions, function (error, response, body) {
    if (error) {
    console.log('Error:', error);
  } else {
    console.log('Response:', body);
  }
  });

    ````

    ````js filename="NodeJS Axios" copy
    const axios = require('axios');
    const fs = require('fs');

    const url = 'https://api.worqhat.com/api/ai/images/v2/image-analysis';
    const apiKey = '•••••••';
    const orgKey = '•••••••';
    const filePath = 'path/to/introduction.png';

    const formData = new FormData();
    formData.append('image', fs.createReadStream(filePath));

    const config = {
    headers: {
    'x-api-key': apiKey,
    'x-org-key': orgKey,
    ...formData.getHeaders(),
  },
  };

    axios.post(url, formData, config)
    .then(response => {
    console.log('Response:', response.data);
  })
    .catch(error => {
    console.log('Error:', error);
  });

    ````
  </Tab>
  <Tab>
    ````py filename="Python Requests" copy
    import requests

    url = 'https://api.worqhat.com/api/ai/images/v2/image-analysis'
    api_key = '•••••••'
    org_key = '•••••••'
    file_path = 'path/to/introduction.png'

    headers = {
    'x-api-key': api_key,
    'x-org-key': org_key
  }

    files = {'image': open(file_path, 'rb')}

    response = requests.post(url, headers=headers, files=files)

    if response.status_code == 200:
    print('Response:', response.json())
    else:
    print('Error:', response.text)

    ````
  </Tab>
  <Tab>
    ````ruby filename="Ruby" copy
    require 'httparty'

    url = 'https://api.worqhat.com/api/ai/images/v2/image-analysis'
    api_key = '•••••••'
    org_key = '•••••••'
    file_path = 'path/to/introduction.png'

    headers = {
    'x-api-key' => api_key,
    'x-org-key' => org_key
  }

    response = HTTParty.post(url, headers: headers, body: {image: File.open(file_path)})

    if response.code == 200
    puts 'Response:', response.parsed_response
    else
    puts 'Error:', response.body
    end

    ````
  </Tab>
  <Tab>
    ````php filename="PHP" copy
    <?php

    $url = 'https://api.worqhat.com/api/ai/images/v2/image-analysis';
    $api_key = '•••••••';
    $org_key = '•••••••';
    $file_path = 'path/to/introduction.png';

    $headers = array(
      'x-api-key: ' . $api_key,
      'x-org-key: ' . $org_key
    );

    $curl = curl_init();

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, array('image' => new CurlFile($file_path)));

    $response = curl_exec($curl);

    if ($response === false) {
      echo 'Error: ' . curl_error($curl);
    } else {
      $http_code = curl_getinfo($curl, CURLINFO_HTTP_CODE);
      if ($http_code === 200) {
        echo 'Response: ' . $response;
      } else {
        echo 'Error: ' . $response;
      }
    }

    curl_close($curl);
    ?>

    ````
  </Tab>
  <Tab>
    ````java filename="Java" copy
    import okhttp3.MediaType;
    import okhttp3.OkHttpClient;
    import okhttp3.Request;
    import okhttp3.RequestBody;
    import okhttp3.Response;

    import java.io.File;
    import java.io.IOException;

    public class Main {
    public static void main(String[] args) throws IOException {
    String url = "https://api.worqhat.com/api/ai/images/v2/image-analysis";
    String apiKey = "•••••••";
    String orgKey = "•••••••";
    String filePath = "path/to/introduction.png";

    File imageFile = new File(filePath);
    OkHttpClient client = new OkHttpClient();

    RequestBody requestBody = new MultipartBody.Builder()
    .setType(MultipartBody.FORM)
    .addFormDataPart("image", imageFile.getName(),
    RequestBody.create(MediaType.parse("image/*"), imageFile))
    .build();

    Request request = new Request.Builder()
    .url(url)
    .header("x-api-key", apiKey)
    .header("x-org-key", orgKey)
    .post(requestBody)
    .build();

    Response response = client.newCall(request).execute();
    if (response.isSuccessful()) {
    System.out.println("Response: " + response.body().string());
  } else {
    System.out.println("Error: " + response.body().string());
  }
  }
  }

    ````
  </Tab>
  <Tab>
    ````go filename="GO" copy
    package main

    import (
    "bytes"
    "fmt"
    "io"
    "mime/multipart"
    "net/http"
    "os"
    )

    func main() {
    url := "https://api.worqhat.com/api/ai/images/v2/image-analysis"
    apiKey := "•••••••"
    orgKey := "•••••••"
    filePath := "path/to/introduction.png"

    file, err := os.Open(filePath)
    if err != nil {
    fmt.Println("Error opening file:", err)
    return
  }
    defer file.Close()

    body := &bytes.Buffer{}
    writer := multipart.NewWriter(body)
    part, err := writer.CreateFormFile("image", file.Name())
    if err != nil {
    fmt.Println("Error creating form file:", err)
    return
  }
    io.Copy(part, file)
    writer.Close()

    request, err := http.NewRequest("POST", url, body)
    if err != nil {
    fmt.Println("Error creating request:", err)
    return
  }
    request.Header.Set("x-api-key", apiKey)
    request.Header.Set("x-org-key", orgKey)
    request.Header.Set("Content-Type", writer.FormDataContentType())

    client := &http.Client{}
    response, err := client.Do(request)
    if err != nil {
    fmt.Println("Error sending request:", err)
    return
  }
    defer response.Body.Close()

    if response.StatusCode == http.StatusOK {
    fmt.Println("Response:", response.Body)
  } else {
    fmt.Println("Error:", response.Status)
  }
  }

    ````
  </Tab>
  <Tab>
    ````c filename="C" copy
    #include <stdio.h>
    #include <curl/curl.h>

    int main(void) {
    CURL * curl;
    CURLcode res;
    const char *url = "https://api.worqhat.com/api/ai/images/v2/image-analysis";
    const char *apiKey = "•••••••";
    const char *orgKey = "•••••••";
    const char *filePath = "path/to/introduction.png";

    FILE *file = fopen(filePath, "rb");
    if (!file) {
    printf("Error opening file\n");
    return 1;
  }

    curl_global_init(CURL_GLOBAL_ALL);
    curl = curl_easy_init();
    if (curl) {
    struct curl_httppost *formpost = NULL;
    struct curl_httppost *lastptr = NULL;

    curl_formadd(&formpost, &lastptr,
    CURLFORM_COPYNAME, "image",
    CURLFORM_FILE, filePath,
    CURLFORM_END);

    curl_easy_setopt(curl, CURLOPT_URL, url);
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, "Content-Type: multipart/form-data");
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, "x-api-key: %s", apiKey);
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, "x-org-key: %s", orgKey);
    curl_easy_setopt(curl, CURLOPT_HTTPPOST, formpost);

    res = curl_easy_perform(curl);
    if (res != CURLE_OK) {
    printf("Error sending request: %s\n", curl_easy_strerror(res));
  } else {
    long response_code;
    curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &response_code);
    if (response_code == 200) {
    printf("Request succeeded\n");
  } else {
    printf("Request failed with code %ld\n", response_code);
  }
  }

    curl_formfree(formpost);
    curl_easy_cleanup(curl);
  }

    fclose(file);
    curl_global_cleanup();

    return 0;
  }

    ````
  </Tab>
</Tabs>


### Response

#### Table View

| Data Type |  Key  | Value                                  | Description                           |
|:---------| :------------: |:---------------------------------------|:--------------------------------------|
| String | id | `4a24ea32-3fbc-4667-ad78-d5bd1652a5cb` | Unique identifier for the API Request |
| String | status | `success` or `error`                   | Status of the API Request             |
| Number | timestamp | `1620120000`                           | Timestamp of the API Request          |
| Object | content | `{Key Value Pairs of Types}`   | The Analysis Results                |
| Number | processing_count | `6` | The Number of API Requests Processed |

#### JSON View

````json filename="JSON" copy
{
  "050433c7-1ca4-4fdc-a3d5-0655c2c8a721",
  status: "success",
  timestamp: 1683322578778,
  content: {
    [
      {
        Name: "Mobile Phone",
        Parents: [
          {
            Name: "Phone"
          }
        ],
        Aliases: [
          {
            Name: "Cell Phone"
          }
        ],
        Categories: [
          {
            Name: "Technology and Computing"
          }
        ],
        Confidence: 99.9364013671875,
        Instances: [
          {
            BoundingBox: {
              Width: 0.26779675483703613,
              Height: 0.8562285900115967,
              Left: 0.3604024350643158,
              Top: 0.09245597571134567
            },
            Confidence: 99.9364013671875,
            DominantColors: [
              {
                Red: 120,
                Green: 137,
                Blue: 132,
                HexCode: "3A7432",
                SimplifiedColor: "red",
                CssColor: "fuscia",
                PixelPercentage: 40.1
              }
            ]
          }
        ]
      }
    ],
    image_properties: {
      {
        40,
        Sharpness: 40,
        Contrast: 24
      },
      [
        {
          Red: 120,
          Green: 137,
          Blue: 132,
          HexCode: "3A7432",
          SimplifiedColor: "red",
          CssColor: "fuscia",
          PixelPercentage: 40.1
        }
      ],
      Foreground: {
        {
          40,
          Sharpness: 40
        },
        [
          {
            Red: 200,
            Green: 137,
            Blue: 132,
            HexCode: "3A7432",
            CSSColor: "",
            SimplifiedColor: "red",
            PixelPercentage: 30.7
          }
        ]
      },
      {
        {
          40,
          Sharpness: 40
        },
        [
          {
            Red: 200,
            Green: 137,
            Blue: 132,
            HexCode: "3A7432",
            CSSColor: "",
            SimplifiedColor: "Red",
            PixelPercentage: 10.2
          }
        ]
      }
    }
  },
  6
}
````

The Content Object contains two main arrays, `analysed_data` and `image_properties`. The
`analysed_data` array contains the results of the Image Analysis process, while the
`image_properties` array contains the results of the Image Properties Analysis.

The `analysed_data` array contains an array of the Detected Objects and Labels in the form of
Key Value Pairs in the following format:

| Data Type |  Key  | Value                                  | Description                           |
|:---------| :------------: |:---------------------------------------|:--------------------------------------|
| String | Name | `Mobile Phone` | The Name of the Detected Object |
| Array | Parents | `[{"Phone"}]` | The Parent Labels of the Detected Object |
| Array | Aliases | `[{"Cell Phone"}]` | The Aliases/Similar Names of the Detected Object |
| Array | Categories | `[{"Technology and Computing"}]` | The Categories of the Detected Object |
| Number | Confidence | `99.9364013671875` | The Confidence Score of the Detected Object |

The `image_properties` array contains an array of the Image Properties in the form of
Key Value Pairs in the following format:

| Data Type |  Key  | Value                                  | Description                           |
|:---------| :------------: |:---------------------------------------|:--------------------------------------|
| Object | Quality | `{40, Sharpness: 40, Contrast: 24}` | The Quality of the Image |
| Array | DominantColors | `[{120, Green: 137, Blue: 132, HexCode: "3A7432", SimplifiedColor: "red", CssColor: "fuscia", PixelPercentage: 40.1}]` | The Dominant Colors of the Image |
| Object | Foreground | `{{40, Sharpness: 40}, [{Red: 200, Green: 137, Blue: 132, HexCode: "3A7432", CSSColor: "", SimplifiedColor: "red", PixelPercentage: 30.7}]}` | The Foreground of the Image |
| Object | Background | `{{40, Sharpness: 40}, [{Red: 200, Green: 137, Blue: 132, HexCode: "3A7432", CSSColor: "", SimplifiedColor: "Red", PixelPercentage: 10.2}]}` | The Background of the Image |


### Error Codes

| Error Code | Description                                        |
|:---------|:---------------------------------------------------|
| 400 | Bad Request                                        |
| 401 | Unauthorized : Invalid API Key or Organization Key |
| 402 | Syntax Error : Invalid JSON                        |
